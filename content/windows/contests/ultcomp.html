<div class="window color glass active" id="contestPage" style="width: 450px; height: 418px;">
    <div class="title-bar">
        <div class="title-bar-text">#ultcomp</div>
        <div class="title-bar-controls">
            <button aria-label="Close" onclick="closeWindow(this)"></button>
        </div>
    </div>
    <div class="window-body has-space has-scrollbar" style="width: 423px; height: 348px; overflow: auto">
        <!-- Content sections for dynamic tab loading -->
        <section class="tabs" style="max-width: 601px">
            <menu role="tablist" aria-label="contestPageTabs">
                <button role="tab" aria-controls="info-content" id="tab-btn-ultcomp-Info" aria-selected="true">General Rules & Info</button>
                <button role="tab" aria-controls="info-content" id="tab-btn-ultcomp-round1">Round 1</button>
                <button role="tab" aria-controls="info-content" id="tab-btn-ultcomp-round2" disabled>Round 2</button>
            </menu>
            <div id="info-content" class="tab-content"></div> 
        </section>
    </div>
    <div class="status-bar" style="width: 435px;">
        <p class="status-bar-field">Round #1 Deadline</p>
        <p class="status-bar-field">August 10th, 2024 3:30pm EST</p>
        <div id="countdown-ultcomp"></div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="content/scripts/utilities.js"></script>
<script src="content/scripts/windowFunctions.js"></script>
<script src="content/scripts/settingsManager.js"></script>
<script>
$(document).ready(function() {
    // Load initial content for contestPage
    loadTabContent("contestPage", "#info-content", "content/windows/contests/ultcomp/info.html");
    
    // Event listeners for tab buttons within the contestPage
    $("#tab-btn-ultcomp-Info").click(function() {
        selectTab(this, "contestPage");
        unloadTabContent("contestPage", ".tab-content"); // Unload content of all tabs within contestPage
        loadTabContent("contestPage", "#info-content", "content/windows/contests/ultcomp/info.html");
    });
    $("#tab-btn-ultcomp-round1").click(function() {
        selectTab(this, "contestPage");
        unloadTabContent("contestPage", ".tab-content"); // Unload content of all tabs within contestPage
        loadTabContent("contestPage", "#info-content", "content/windows/contests/ultcomp/round1.html");
    });
});

function updateCountdown() {
    var deadline = new Date("August 10, 2024 15:30:00").getTime();
    // Get current time in UTC and then convert to EDT (UTC-4)
    var now = new Date().getTime();
    var nowUTC = now + (new Date().getTimezoneOffset() * 60000);
    var nowEDT = new Date(nowUTC - (4 * 60 * 60 * 1000)).getTime();

    var timeRemaining = deadline - nowEDT;

    var days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
    var hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);

    document.getElementById("countdown-ultcomp").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";

    if (timeRemaining < 0) {
        clearInterval(countdownInterval);
        document.getElementById("countdown-ultcomp").innerHTML = "Deadline has passed.";
    }
}

var countdownInterval = setInterval(updateCountdown, 1000);
</script>
