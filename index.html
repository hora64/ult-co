<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ult & co 3ds ui test</title>
  </head>
  <body>
    <div class="screenContent" id="screenContent"></div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        if (/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
          $("#screenContent").load("content/errorScreen/mobileError.html", function() {});
        } else {
          loadPage();
        }
      });

      function loadPage() {
        $.getJSON('content/common/jsonList/pageHashes.json', function(data) {
          console.log("Page Hashes:", data);
          var hash = window.location.hash.substring(1) || 'main';
          console.log("Current Hash:", hash);
          var entry = data[hash];
          if (entry) {
            var type = entry.type;
            var location = entry.location;
            if (type === "app") {
              $("#screenContent").load(location, function(response, status) {
                if (status === "error") {
                  console.error('Error loading content for "' + hash + '" at "' + location + '". Loading home screen.');
                  $("#screenContent").load("content/apps/homeScreen/page/page.html");
                }
              });
            } else {
              console.warn('Unsupported type "' + type + '" for hash "' + hash + '". Loading home screen.');
              $("#screenContent").load("content/apps/homeScreen/page/page.html");
            }
          } else {
            console.warn('No entry found for hash "' + hash + '". Loading home screen.');
            $("#screenContent").load("content/apps/homeScreen/page/page.html");
          }
        }).fail(function() {
          console.error("Failed to load pageHashes.json. Loading home screen.");
          $("#screenContent").load("content/apps/homeScreen/page/page.html");
        });
      }
    </script>
  </body>
</html>